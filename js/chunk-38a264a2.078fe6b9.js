(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38a264a2"],{"0d39":function(t,e,a){},c740:function(t,e,a){"use strict";var r=a("23e7"),i=a("b727").findIndex,s=a("44d2"),n=a("ae40"),o="findIndex",l=!0,c=n(o);o in[]&&Array(1)[o]((function(){l=!1})),r({target:"Array",proto:!0,forced:l||!c},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},e76a:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-33"},[a("el-dialog",{attrs:{title:"建立群組",visible:t.dialogTransfer,width:"80%","destroy-on-close":!0},on:{"update:visible":function(e){t.dialogTransfer=e}}},[a("transfer-box",{attrs:{inputData:t.other,groupsName:t.allGroupsName},on:{returnData:t.createGroup}})],1),t.allGroupsName.length>1?a("div",[t._l(t.groups,(function(e,r){return a("div",{key:r,staticClass:"card",class:{"card-muted":t._.includes(t.disabledGroups,r)}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-50 card-title"},[t._v(" "+t._s(r+"("+e.length+"篇)")+" ")]),a("div",{staticClass:"col-50"},[a("el-tooltip",{attrs:{content:t._.includes(t.disabledGroups,r)?"加入比對":"抽離比對"}},[a("el-button",{attrs:{type:t._.includes(t.disabledGroups,r)?"success":"danger",icon:t._.includes(t.disabledGroups,r)?"el-icon-circle-plus-outline":"el-icon-remove-outline"},on:{click:function(e){return t.toggleGroup(r)}}})],1),a("el-tooltip",{attrs:{content:"群組資訊"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-s-data"},on:{click:function(e){return t.detailGroup(r)}}})],1),a("el-tooltip",{attrs:{content:"刪除群組"}},["其他"!==r?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.deleteGroup(r)}}}):t._e()],1)],1)])])})),0!==t.detailGroupName.length?a("el-dialog",{attrs:{title:t.detailGroupName+" - ("+t.groups[this.detailGroupName].length+"篇)",visible:t.dialogDetail,width:"80%","destroy-on-close":!0},on:{"update:visible":function(e){t.dialogDetail=e},closed:function(e){t.detailGroupName=""}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-33"},[a("el-scrollbar",{attrs:{wrapStyle:"max-height:500px;"}},[a("ul",{staticClass:"list"},t._l(t.groups[this.detailGroupName],(function(e){return a("li",{key:e.id},[t._v(t._s(e.title))])})),0)])],1),a("div",{staticClass:"col-66"},[a("div",{staticClass:"chart-container"},[""!==t.detailGroupName?a("scatter-chart",{attrs:{inputData:t.detailGroupDataset}}):t._e()],1)])])]):t._e()],2):t._e(),a("div",{staticClass:"btn-placeholder",on:{click:function(e){t.dialogTransfer=!0}}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 新增群組 ")])],1),a("div",{staticClass:"col-66"},[a("div",{staticClass:"row"},t._l(t.totalDataset,(function(e,r,i){return a("div",{key:r+i,staticClass:"col-50"},[a("div",{staticClass:"card chart-container"},[a("h3",{staticClass:"card-title"},[t._v(t._s(t.$store.state.dictionary[r]))]),t.allGroupsName.length>1?a("pie-chart",{attrs:{inputData:e}}):a("div",{staticClass:"bg-nodata"},[t._v("沒有群組資料")])],1)])})),0)])])])},i=[],s=(a("99af"),a("c740"),a("4160"),a("c975"),a("d81d"),a("a434"),a("d3b7"),a("159b"),a("ddb0"),a("2909")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{model:t.transferForm,rules:t.rules,"status-icon":""}},[a("el-form-item",{attrs:{label:"群組名稱",prop:"tempName"}},[a("el-input",{attrs:{placeholder:"請輸入群組名稱"},model:{value:t.transferForm.tempName,callback:function(e){t.$set(t.transferForm,"tempName",e)},expression:"transferForm.tempName"}})],1),a("el-form-item",[a("el-transfer",{attrs:{data:t.transferData,titles:["可選文章",t.transferForm.tempName],filterable:"","filter-placeholder":"關鍵字"},model:{value:t.transferTemp,callback:function(e){t.transferTemp=e},expression:"transferTemp"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:t.transferTemp.length<=0},on:{click:t.returnTemp}},[t._v("新增")])],1)],1)},o=[],l=(a("caad"),a("2532"),{props:["inputData","groupsName"],data:function(){var t=this,e=function(e,a,r){var i=t._.includes(t.groupsName,a);return""===a?r(new Error("請輸入群組名稱")):i?r(new Error("群組名稱不能重複")):r()};return{transferForm:{tempName:""},rules:{tempName:[{validator:e,trigger:"blur"}]},transferTemp:[]}},computed:{transferData:function(){var t=this.inputData.map((function(t){return{key:"".concat(t.id),label:t.title}}));return t}},methods:{returnTemp:function(){var t=this;this.$refs.form.validate((function(e){e&&t.$emit("returnData",t.transferTemp,t.transferForm.tempName)}))}}}),c=l,u=(a("ec68"),a("2877")),d=Object(u["a"])(c,n,o,!1,null,null,null),p=d.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-chart",{attrs:{autoresize:!0,options:t.options}})},h=[],m={props:["inputData"],data:function(){return{options:{tooltip:{},legend:{},dataset:{source:this.inputData},series:[{type:"pie",label:{show:!1,position:"center"},labelLine:{show:!1},encode:{itemName:0,value:1,tooltip:[1]}}]}}},watch:{inputData:function(t){this.options.dataset.source=t}}},v=m,g=Object(u["a"])(v,f,h,!1,null,null,null),b=g.exports,_=a("663d"),G={components:{transferBox:p,pieChart:b,scatterChart:_["a"]},data:function(){return{dialogTransfer:!1,dialogDetail:!1,other:[],groups:{},disabledGroups:[],detailGroupName:""}},methods:{createGroup:function(t,e){var a=this,r=[];a.dialogTransfer=!1,this.$gtag.event("點擊",{event_category:"playground",event_label:"新增群組",value:e}),t.forEach((function(t){var e=a._.findIndex(a.other,(function(e){return e.id===t})),i=a.other.splice(e,1);r.push.apply(r,Object(s["a"])(i))})),a.$set(a.groups,e,r)},deleteGroup:function(t){var e=this._.indexOf(this.disabledGroups,t);-1!==e&&this.disabledGroups.splice(e,1),this.other=[].concat(Object(s["a"])(this.other),Object(s["a"])(this.groups[t])),this.$delete(this.groups,t)},toggleGroup:function(t){var e=this._.indexOf(this.disabledGroups,t);-1!==e?this.disabledGroups.splice(e,1):this.disabledGroups.push(t)},detailGroup:function(t){this.dialogDetail=!0,this.detailGroupName=t}},computed:{articlesData:function(){return this._.cloneDeep(this.$store.state.allData)},totalDataset:function(){var t=this,e=["count","gp","view"],a={},r=function(){var e=t._.cloneDeep(t.groups);return t.disabledGroups.forEach((function(t){delete e[t]})),e}();return e.forEach((function(e){a[e]=[],t._.forEach(r,(function(r,i){var s=0;s="count"===e?r.length:t._.sumBy(r,(function(t){return t.meta[e]})),a[e].push([i,s])}))})),a},allGroupsName:function(){return this._.keys(this.groups)},detailGroupDataset:function(){var t=this.groups[this.detailGroupName].map((function(t){return{title:t.title,gp:t.meta.gp,view:t.meta.view}}));return t}},watch:{other:{immediate:!0,handler:function(){this.$set(this.groups,"其他",this.other)}}},created:function(){this.other=this.articlesData}},D=G,N=Object(u["a"])(D,r,i,!1,null,null,null);e["default"]=N.exports},ec68:function(t,e,a){"use strict";a("0d39")}}]);
//# sourceMappingURL=chunk-38a264a2.078fe6b9.js.map